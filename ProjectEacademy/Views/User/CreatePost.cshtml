@model ProjectEacademy.Models.Post

@using Microsoft.AspNet.Identity
@using ProjectEacademy.Extension

@{
    ViewBag.Title = "Create Post";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create Post</h2>
@if (Request.IsAuthenticated)
{
    if (User.Identity.GetAccountType().Equals("Teacher"))
    {
        using (Html.BeginForm("CreatePost", "User", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true);

            <div class="form-group">
                @Html.LabelFor(p => p.Subject)
                @Html.EditorFor(p => p.Subject)
                @Html.ValidationMessageFor(p => p.Subject)
            </div>
            <div class="form-group">
                @Html.LabelFor(p => p.Description)
                @Html.TextAreaFor(p => p.Description, 5, 105, new { @style = "resize: none;" })
                @Html.ValidationMessageFor(p => p.Description)
            </div>
            <div class="form-group">
                @Html.DropDownListFor(p => p.Type, new SelectList(Enum.GetValues(typeof(ProjectEacademy.Models.PostType))), "Select Type")
            </div>
            <div class="form-group">
                @Html.LabelFor(p => p.DeadLine)
                @Html.TextBoxFor(p => p.DeadLine, new { @class = "date-picker" })
            </div>

            <span>Max size: 35MB</span>
            <div class="form-group">
                @Html.LabelFor(p => p.FileDetails)
                <div class="editor-field">
                    <input type="file" name="file" />
                </div>
            </div>
            <label>@ViewBag.showError</label>
            <div>
                <button type="submit" class="btn btn-primary">
                    Create Post
                </button>
            </div>
        }
    }
    else
    {
        <h1>You don't have permission to upload file</h1>
    }
}
else
{
    <h2>You dont have permission to access this page</h2>
}

@section Scripts {

    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script>
        $(function () {
            $('.date-picker').datepicker();
        })
    </script>
}
